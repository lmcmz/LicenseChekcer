import{c as z,u as qt,r as $,j as l,G as Ut,X as xe}from"./main-EGICLitK.js";import{R as C,K as Ve,C as Qt}from"./localDatabase-DpUBSDud.js";import{G as ge,A as He,I as qe}from"./info-CQWR5KFp.js";import{w as Ue,x as Xe,c as te,y as Ge,s as Ke,d as Ye,i as et,f as ee,g as We,h as ne}from"./string-BiPMbYnx.js";const Ze=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],zt=z("arrow-down",Ze);const Je=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Tt=z("arrow-up",Je);const Qe=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],tn=z("boxes",Qe);const en=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],nn=z("chevron-down",en);const rn=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],sn=z("chevron-right",rn);const an=[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]],on=z("cloud-download",an);const ln=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],cn=z("code-xml",ln);const un=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],hn=z("cpu",un);const dn=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],fn=z("database",dn);const pn=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],mn=z("external-link",pn);const xn=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],gn=z("layers",xn);const yn=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],wn=z("layout-grid",yn);const vn=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],bn=z("link-2",vn);const _n=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$t=z("loader-circle",_n);const kn=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Nn=z("maximize",kn);const jn=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],An=z("mouse-pointer-2",jn);const Sn=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Cn=z("network",Sn);const Mn=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],En=z("package",Mn);const zn=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Tn=z("refresh-cw",zn);const $n=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ye=z("search",$n);const In=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ln=z("triangle-alert",In);const Rn=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Dn=z("zoom-in",Rn);const Fn=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],On=z("zoom-out",Fn);function Bn(t){return t.source}function Pn(t){return t.target}function Vn(t){let e=Bn,n=Pn,r=Xe,s=Ge,i=null,a=null,c=Ue(u);function u(){let o;const h=Ke.call(arguments),p=e.apply(this,h),f=n.apply(this,h);if(i==null&&(a=t(o=c())),a.lineStart(),h[0]=p,a.point(+r.apply(this,h),+s.apply(this,h)),h[0]=f,a.point(+r.apply(this,h),+s.apply(this,h)),a.lineEnd(),o)return a=null,o+""||null}return u.source=function(o){return arguments.length?(e=o,u):e},u.target=function(o){return arguments.length?(n=o,u):n},u.x=function(o){return arguments.length?(r=typeof o=="function"?o:te(+o),u):r},u.y=function(o){return arguments.length?(s=typeof o=="function"?o:te(+o),u):s},u.context=function(o){return arguments.length?(o==null?i=a=null:a=t(i=o),u):i},u}function Hn(){return Vn(Ye)}var re=180/Math.PI,Dt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function we(t,e,n,r,s,i){var a,c,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,u/=c),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:s,translateY:i,rotate:Math.atan2(e,t)*re,skewX:Math.atan(u)*re,scaleX:a,scaleY:c}}var pt;function qn(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Dt:we(e.a,e.b,e.c,e.d,e.e,e.f)}function Un(t){return t==null||(pt||(pt=document.createElementNS("http://www.w3.org/2000/svg","g")),pt.setAttribute("transform",t),!(t=pt.transform.baseVal.consolidate()))?Dt:(t=t.matrix,we(t.a,t.b,t.c,t.d,t.e,t.f))}function ve(t,e,n,r){function s(o){return o.length?o.pop()+" ":""}function i(o,h,p,f,x,k){if(o!==p||h!==f){var _=x.push("translate(",null,e,null,n);k.push({i:_-4,x:et(o,p)},{i:_-2,x:et(h,f)})}else(p||f)&&x.push("translate("+p+e+f+n)}function a(o,h,p,f){o!==h?(o-h>180?h+=360:h-o>180&&(o+=360),f.push({i:p.push(s(p)+"rotate(",null,r)-2,x:et(o,h)})):h&&p.push(s(p)+"rotate("+h+r)}function c(o,h,p,f){o!==h?f.push({i:p.push(s(p)+"skewX(",null,r)-2,x:et(o,h)}):h&&p.push(s(p)+"skewX("+h+r)}function u(o,h,p,f,x,k){if(o!==p||h!==f){var _=x.push(s(x)+"scale(",null,",",null,")");k.push({i:_-4,x:et(o,p)},{i:_-2,x:et(h,f)})}else(p!==1||f!==1)&&x.push(s(x)+"scale("+p+","+f+")")}return function(o,h){var p=[],f=[];return o=t(o),h=t(h),i(o.translateX,o.translateY,h.translateX,h.translateY,p,f),a(o.rotate,h.rotate,p,f),c(o.skewX,h.skewX,p,f),u(o.scaleX,o.scaleY,h.scaleX,h.scaleY,p,f),o=h=null,function(x){for(var k=-1,_=f.length,A;++k<_;)p[(A=f[k]).i]=A.x(x);return p.join("")}}}var Xn=ve(qn,"px, ","px)","deg)"),Gn=ve(Un,", ",")",")"),Kn=1e-12;function se(t){return((t=Math.exp(t))+1/t)/2}function Yn(t){return((t=Math.exp(t))-1/t)/2}function Wn(t){return((t=Math.exp(2*t))-1)/(t+1)}const Zn=(function t(e,n,r){function s(i,a){var c=i[0],u=i[1],o=i[2],h=a[0],p=a[1],f=a[2],x=h-c,k=p-u,_=x*x+k*k,A,v;if(_<Kn)v=Math.log(f/o)/e,A=function(U){return[c+U*x,u+U*k,o*Math.exp(e*U*v)]};else{var S=Math.sqrt(_),E=(f*f-o*o+r*_)/(2*o*n*S),I=(f*f-o*o-r*_)/(2*f*n*S),F=Math.log(Math.sqrt(E*E+1)-E),R=Math.log(Math.sqrt(I*I+1)-I);v=(R-F)/e,A=function(U){var rt=U*v,st=se(F),Q=o/(n*S)*(st*Wn(e*rt+F)-Yn(F));return[c+Q*x,u+Q*k,o*st/se(e*rt+F)]}}return A.duration=v*1e3*e/Math.SQRT2,A}return s.rho=function(i){var a=Math.max(.001,+i),c=a*a,u=c*c;return t(a,c,u)},s})(Math.SQRT2,2,4),Jn=async t=>{if(t.length===0)return[];try{const e=await fetch("/api/audit-licenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dependencies:t})});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();if(!n.success)throw new Error(n.error||"Failed to audit dependencies");return n.data||[]}catch(e){throw console.error("Audit error:",e),e}},Qn=new Set(["name","version","description","scripts","type","main","module","exports","author","license","engines","private","keywords","repository","bugs","homepage","devDependencies","dependencies","peerDependencies","optionalDependencies","workspaces","publishConfig","dependenciesMeta","bundleDependencies","bundledDependencies","cpu","os"]),tr=t=>{const e=[],n=t.trim();try{const o=JSON.parse(n),h=["dependencies","devDependencies","peerDependencies","optionalDependencies"];let p=!1;if(h.forEach(f=>{if(o[f]&&typeof o[f]=="object"){p=!0;for(const[x,k]of Object.entries(o[f]))typeof k=="string"&&e.push({name:x,version:k})}}),o.pins&&Array.isArray(o.pins)&&(p=!0,o.pins.forEach(f=>{e.push({name:f.identity||f.package||ie(f.location),version:f.state?.version||"latest"})})),p)return e}catch{}const r=/require\s+([^\s]+)\s+([^\s\n\r]+)/g;let s;for(;(s=r.exec(n))!==null;)e.push({name:s[1],version:s[2]});const i=/^([a-zA-Z0-9\-_]+)\s*=\s*["']?([^"'\n]+)["']?/gm;for(;(s=i.exec(n))!==null;)["package","lib","bin"].includes(s[1])||e.push({name:s[1],version:s[2]});const a=/<dependency>[\s\S]*?<artifactId>(.*?)<\/artifactId>[\s\S]*?<version>(.*?)<\/version>/g;for(;(s=a.exec(n))!==null;)e.push({name:s[1],version:s[2]});const c=/(?:implementation|api|testImplementation|classpath)\s+['"]([^:]+):([^:]+):([^'"]+)['"]/g;for(;(s=c.exec(n))!==null;)e.push({name:`${s[1]}:${s[2]}`,version:s[3]});const u=/\.package\(url:\s*["']([^"']+)["'],\s*(?:from|branch|revision):\s*["']([^"']+)["']\)/g;for(;(s=u.exec(n))!==null;)e.push({name:ie(s[1]),version:s[2]});if(e.length===0){const o=n.split(`
`),h=/["']?([^"':\s=<>!]+)["']?\s*[:=<>!]+\s*["']?([^"'\s,;]+)["']?/;o.forEach(p=>{const f=p.trim();if(!f||f.startsWith("//")||f.startsWith("#")||f.startsWith("/*"))return;const x=f.match(h);x&&!Qn.has(x[1])&&e.push({name:x[1],version:x[2]})})}return e},ie=t=>{const e=t.replace(/\/$/,"").split("/");return e[e.length-1].replace(/\.git$/,"")},be="licenseguard_audit_cache_v1",_e=()=>{try{const t=localStorage.getItem(be);return t?JSON.parse(t):{}}catch(t){return console.error("Failed to load audit cache",t),{}}},er=t=>{try{const e=_e(),n=`${t.name.toLowerCase()}@${t.version}`;e[n]=t,localStorage.setItem(be,JSON.stringify(e))}catch(e){console.error("Failed to save to audit cache",e)}},nr=(t,e)=>{const n=_e(),r=`${t.toLowerCase()}@${e}`;return n[r]||null},ae={[C.HIGH]:3,[C.CAUTION]:2,[C.SAFE]:1,[C.UNKNOWN]:0},rr=({audits:t})=>{const{t:e}=qt(),[n,r]=$.useState("risk"),[s,i]=$.useState("desc"),a=$.useMemo(()=>[...t].sort((p,f)=>{let x=0;return n==="name"&&(x=p.name.localeCompare(f.name)),n==="license"&&(x=p.license.localeCompare(f.license)),n==="risk"&&(x=ae[p.riskLevel]-ae[f.riskLevel]),s==="asc"?x:-x}),[t,n,s]),c=p=>{n===p?i(s==="asc"?"desc":"asc"):(r(p),i("desc"))},u=p=>p.toLowerCase().includes("github.com"),o=p=>{try{return new URL(p).hostname.replace("www.","")}catch{return p}},h=p=>{switch(p){case C.SAFE:return e("risks.safe");case C.CAUTION:return e("risks.caution");case C.HIGH:return e("risks.high");default:return e("risks.unknown")}};return t.length===0?null:l.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 dark:border-white/10 bg-white dark:bg-[#0A0A0A] shadow-sm",children:l.jsxs("table",{className:"w-full text-left border-collapse",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-white/[0.02] border-b border-slate-200 dark:border-white/10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest cursor-pointer hover:text-black dark:hover:text-white transition-colors",onClick:()=>c("name"),children:l.jsxs("div",{className:"flex items-center gap-1",children:[e("table.dependency")," ",n==="name"&&(s==="asc"?l.jsx(Tt,{className:"w-3 h-3"}):l.jsx(zt,{className:"w-3 h-3"}))]})}),l.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest cursor-pointer hover:text-black dark:hover:text-white transition-colors",onClick:()=>c("license"),children:l.jsxs("div",{className:"flex items-center gap-1",children:[e("table.license")," ",n==="license"&&(s==="asc"?l.jsx(Tt,{className:"w-3 h-3"}):l.jsx(zt,{className:"w-3 h-3"}))]})}),l.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest cursor-pointer hover:text-black dark:hover:text-white transition-colors",onClick:()=>c("risk"),children:l.jsxs("div",{className:"flex items-center gap-1",children:[e("table.risk")," ",n==="risk"&&(s==="asc"?l.jsx(Tt,{className:"w-3 h-3"}):l.jsx(zt,{className:"w-3 h-3"}))]})}),l.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:e("table.assessment")})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-white/5",children:a.map((p,f)=>l.jsxs("tr",{className:"group hover:bg-slate-50 dark:hover:bg-white/[0.01] transition-colors",children:[l.jsxs("td",{className:"px-6 py-5",children:[l.jsx("div",{className:"font-bold text-xs text-black dark:text-white",children:p.name}),l.jsxs("div",{className:"text-[9px] text-slate-400 font-mono mt-0.5",children:["v",p.version]})]}),l.jsx("td",{className:"px-6 py-5",children:l.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-[10px] font-bold bg-slate-100 dark:bg-white/5 text-slate-600 dark:text-slate-400 border border-slate-200 dark:border-white/5",children:p.license})}),l.jsx("td",{className:"px-6 py-5",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${p.riskLevel===C.SAFE?"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]":p.riskLevel===C.CAUTION?"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.4)]":"bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.4)]"}`}),l.jsx("span",{className:`text-[10px] font-black uppercase tracking-tight ${p.riskLevel===C.SAFE?"text-emerald-600 dark:text-emerald-400":p.riskLevel===C.CAUTION?"text-amber-600 dark:text-amber-400":"text-rose-600 dark:text-rose-400"}`,children:h(p.riskLevel)})]})}),l.jsxs("td",{className:"px-6 py-5",children:[l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 leading-relaxed max-w-sm mb-3",children:p.reason}),l.jsx("div",{className:"flex flex-wrap gap-3",children:p.repository&&l.jsxs("a",{href:p.repository,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1.5 text-[10px] font-bold text-blue-500 hover:text-blue-600 transition-colors uppercase",children:[u(p.repository)?l.jsx(Ut,{className:"w-3.5 h-3.5"}):l.jsx(ge,{className:"w-3.5 h-3.5"}),o(p.repository)]})})]})]},`${p.name}-${f}`))})]})})},sr=({audits:t})=>{const{t:e}=qt(),n=t.reduce((r,s)=>(s.riskLevel===C.SAFE?r.safe++:s.riskLevel===C.CAUTION?r.caution++:s.riskLevel===C.HIGH?r.high++:r.unknown++,r),{safe:0,caution:0,high:0,unknown:0});return l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:e("summary.total"),val:t.length,color:"text-black dark:text-white"},{label:e("summary.safe"),val:n.safe,color:"text-emerald-500",border:"border-emerald-500/20"},{label:e("summary.atRisk"),val:n.high+n.caution,color:"text-rose-500",border:"border-rose-500/20"},{label:e("summary.compliance"),val:t.length?`${Math.round(n.safe/t.length*100)}%`:"0%",color:"text-blue-500",border:"border-blue-500/20"}].map((r,s)=>l.jsxs("div",{className:"bg-white dark:bg-[#0A0A0A] p-5 rounded-xl border border-slate-200 dark:border-white/10",children:[l.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-1",children:r.label}),l.jsx("p",{className:`text-2xl font-black ${r.color} tracking-tighter`,children:r.val})]},s))})};function ir(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function ar(){return this.eachAfter(ir)}function or(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function lr(t,e){for(var n=this,r=[n],s,i,a=-1;n=r.pop();)if(t.call(e,n,++a,this),s=n.children)for(i=s.length-1;i>=0;--i)r.push(s[i]);return this}function cr(t,e){for(var n=this,r=[n],s=[],i,a,c,u=-1;n=r.pop();)if(s.push(n),i=n.children)for(a=0,c=i.length;a<c;++a)r.push(i[a]);for(;n=s.pop();)t.call(e,n,++u,this);return this}function ur(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function hr(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,s=r&&r.length;--s>=0;)n+=r[s].value;e.value=n})}function dr(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function fr(t){for(var e=this,n=pr(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var s=r.length;t!==n;)r.splice(s,0,t),t=t.parent;return r}function pr(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),s=null;for(t=n.pop(),e=r.pop();t===e;)s=t,t=n.pop(),e=r.pop();return s}function mr(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function xr(){return Array.from(this)}function gr(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function yr(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*wr(){var t=this,e,n=[t],r,s,i;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(s=0,i=r.length;s<i;++s)n.push(r[s]);while(n.length)}function Xt(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=_r)):e===void 0&&(e=br);for(var n=new ht(t),r,s=[n],i,a,c,u;r=s.pop();)if((a=e(r.data))&&(u=(a=Array.from(a)).length))for(r.children=a,c=u-1;c>=0;--c)s.push(i=a[c]=new ht(a[c])),i.parent=r,i.depth=r.depth+1;return n.eachBefore(Nr)}function vr(){return Xt(this).eachBefore(kr)}function br(t){return t.children}function _r(t){return Array.isArray(t)?t[1]:null}function kr(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Nr(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function ht(t){this.data=t,this.depth=this.height=0,this.parent=null}ht.prototype=Xt.prototype={constructor:ht,count:ar,each:or,eachAfter:cr,eachBefore:lr,find:ur,sum:hr,sort:dr,path:fr,ancestors:mr,descendants:xr,leaves:gr,links:yr,copy:vr,[Symbol.iterator]:wr};function jr(t,e){return t.parent===e.parent?1:2}function It(t){var e=t.children;return e?e[0]:t.t}function Lt(t){var e=t.children;return e?e[e.length-1]:t.t}function Ar(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Sr(t){for(var e=0,n=0,r=t.children,s=r.length,i;--s>=0;)i=r[s],i.z+=e,i.m+=e,e+=i.s+(n+=i.c)}function Cr(t,e,n){return t.a.parent===e.parent?t.a:n}function gt(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}gt.prototype=Object.create(ht.prototype);function Mr(t){for(var e=new gt(t,0),n,r=[e],s,i,a,c;n=r.pop();)if(i=n._.children)for(n.children=new Array(c=i.length),a=c-1;a>=0;--a)r.push(s=n.children[a]=new gt(i[a],a)),s.parent=n;return(e.parent=new gt(null,0)).children=[e],e}function Er(){var t=jr,e=1,n=1,r=null;function s(o){var h=Mr(o);if(h.eachAfter(i),h.parent.m=-h.z,h.eachBefore(a),r)o.eachBefore(u);else{var p=o,f=o,x=o;o.eachBefore(function(S){S.x<p.x&&(p=S),S.x>f.x&&(f=S),S.depth>x.depth&&(x=S)});var k=p===f?1:t(p,f)/2,_=k-p.x,A=e/(f.x+k+_),v=n/(x.depth||1);o.eachBefore(function(S){S.x=(S.x+_)*A,S.y=S.depth*v})}return o}function i(o){var h=o.children,p=o.parent.children,f=o.i?p[o.i-1]:null;if(h){Sr(o);var x=(h[0].z+h[h.length-1].z)/2;f?(o.z=f.z+t(o._,f._),o.m=o.z-x):o.z=x}else f&&(o.z=f.z+t(o._,f._));o.parent.A=c(o,f,o.parent.A||p[0])}function a(o){o._.x=o.z+o.parent.m,o.m+=o.parent.m}function c(o,h,p){if(h){for(var f=o,x=o,k=h,_=f.parent.children[0],A=f.m,v=x.m,S=k.m,E=_.m,I;k=Lt(k),f=It(f),k&&f;)_=It(_),x=Lt(x),x.a=o,I=k.z+S-f.z-A+t(k._,f._),I>0&&(Ar(Cr(k,o,p),o,I),A+=I,v+=I),S+=k.m,A+=f.m,E+=_.m,v+=x.m;k&&!Lt(x)&&(x.t=k,x.m+=S-v),f&&!It(_)&&(_.t=f,_.m+=A-E,p=o)}return p}function u(o){o.x*=e,o.y=o.depth*n}return s.separation=function(o){return arguments.length?(t=o,s):t},s.size=function(o){return arguments.length?(r=!1,e=+o[0],n=+o[1],s):r?null:[e,n]},s.nodeSize=function(o){return arguments.length?(r=!0,e=+o[0],n=+o[1],s):r?[e,n]:null},s}var zr={value:()=>{}};function Gt(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new yt(n)}function yt(t){this._=t}function Tr(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}yt.prototype=Gt.prototype={constructor:yt,on:function(t,e){var n=this._,r=Tr(t+"",n),s,i=-1,a=r.length;if(arguments.length<2){for(;++i<a;)if((s=(t=r[i]).type)&&(s=$r(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<a;)if(s=(t=r[i]).type)n[s]=oe(n[s],t.name,e);else if(e==null)for(s in n)n[s]=oe(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new yt(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,i=r.length;s<i;++s)r[s].value.apply(e,n)}};function $r(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function oe(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=zr,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ft="http://www.w3.org/1999/xhtml";const le={svg:"http://www.w3.org/2000/svg",xhtml:Ft,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function St(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),le.hasOwnProperty(e)?{space:le[e],local:t}:t}function Ir(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ft&&e.documentElement.namespaceURI===Ft?e.createElement(t):e.createElementNS(n,t)}}function Lr(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ke(t){var e=St(t);return(e.local?Lr:Ir)(e)}function Rr(){}function Kt(t){return t==null?Rr:function(){return this.querySelector(t)}}function Dr(t){typeof t!="function"&&(t=Kt(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var i=e[s],a=i.length,c=r[s]=new Array(a),u,o,h=0;h<a;++h)(u=i[h])&&(o=t.call(u,u.__data__,h,i))&&("__data__"in u&&(o.__data__=u.__data__),c[h]=o);return new B(r,this._parents)}function Fr(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Or(){return[]}function Ne(t){return t==null?Or:function(){return this.querySelectorAll(t)}}function Br(t){return function(){return Fr(t.apply(this,arguments))}}function Pr(t){typeof t=="function"?t=Br(t):t=Ne(t);for(var e=this._groups,n=e.length,r=[],s=[],i=0;i<n;++i)for(var a=e[i],c=a.length,u,o=0;o<c;++o)(u=a[o])&&(r.push(t.call(u,u.__data__,o,a)),s.push(u));return new B(r,s)}function je(t){return function(){return this.matches(t)}}function Ae(t){return function(e){return e.matches(t)}}var Vr=Array.prototype.find;function Hr(t){return function(){return Vr.call(this.children,t)}}function qr(){return this.firstElementChild}function Ur(t){return this.select(t==null?qr:Hr(typeof t=="function"?t:Ae(t)))}var Xr=Array.prototype.filter;function Gr(){return Array.from(this.children)}function Kr(t){return function(){return Xr.call(this.children,t)}}function Yr(t){return this.selectAll(t==null?Gr:Kr(typeof t=="function"?t:Ae(t)))}function Wr(t){typeof t!="function"&&(t=je(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var i=e[s],a=i.length,c=r[s]=[],u,o=0;o<a;++o)(u=i[o])&&t.call(u,u.__data__,o,i)&&c.push(u);return new B(r,this._parents)}function Se(t){return new Array(t.length)}function Zr(){return new B(this._enter||this._groups.map(Se),this._parents)}function _t(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}_t.prototype={constructor:_t,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Jr(t){return function(){return t}}function Qr(t,e,n,r,s,i){for(var a=0,c,u=e.length,o=i.length;a<o;++a)(c=e[a])?(c.__data__=i[a],r[a]=c):n[a]=new _t(t,i[a]);for(;a<u;++a)(c=e[a])&&(s[a]=c)}function ts(t,e,n,r,s,i,a){var c,u,o=new Map,h=e.length,p=i.length,f=new Array(h),x;for(c=0;c<h;++c)(u=e[c])&&(f[c]=x=a.call(u,u.__data__,c,e)+"",o.has(x)?s[c]=u:o.set(x,u));for(c=0;c<p;++c)x=a.call(t,i[c],c,i)+"",(u=o.get(x))?(r[c]=u,u.__data__=i[c],o.delete(x)):n[c]=new _t(t,i[c]);for(c=0;c<h;++c)(u=e[c])&&o.get(f[c])===u&&(s[c]=u)}function es(t){return t.__data__}function ns(t,e){if(!arguments.length)return Array.from(this,es);var n=e?ts:Qr,r=this._parents,s=this._groups;typeof t!="function"&&(t=Jr(t));for(var i=s.length,a=new Array(i),c=new Array(i),u=new Array(i),o=0;o<i;++o){var h=r[o],p=s[o],f=p.length,x=rs(t.call(h,h&&h.__data__,o,r)),k=x.length,_=c[o]=new Array(k),A=a[o]=new Array(k),v=u[o]=new Array(f);n(h,p,_,A,v,x,e);for(var S=0,E=0,I,F;S<k;++S)if(I=_[S]){for(S>=E&&(E=S+1);!(F=A[E])&&++E<k;);I._next=F||null}}return a=new B(a,r),a._enter=c,a._exit=u,a}function rs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ss(){return new B(this._exit||this._groups.map(Se),this._parents)}function is(t,e,n){var r=this.enter(),s=this,i=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function as(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,i=r.length,a=Math.min(s,i),c=new Array(s),u=0;u<a;++u)for(var o=n[u],h=r[u],p=o.length,f=c[u]=new Array(p),x,k=0;k<p;++k)(x=o[k]||h[k])&&(f[k]=x);for(;u<s;++u)c[u]=n[u];return new B(c,this._parents)}function os(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,i=r[s],a;--s>=0;)(a=r[s])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function ls(t){t||(t=cs);function e(p,f){return p&&f?t(p.__data__,f.__data__):!p-!f}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var a=n[i],c=a.length,u=s[i]=new Array(c),o,h=0;h<c;++h)(o=a[h])&&(u[h]=o);u.sort(e)}return new B(s,this._parents).order()}function cs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function us(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function hs(){return Array.from(this)}function ds(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,i=r.length;s<i;++s){var a=r[s];if(a)return a}return null}function fs(){let t=0;for(const e of this)++t;return t}function ps(){return!this.node()}function ms(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],i=0,a=s.length,c;i<a;++i)(c=s[i])&&t.call(c,c.__data__,i,s);return this}function xs(t){return function(){this.removeAttribute(t)}}function gs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ys(t,e){return function(){this.setAttribute(t,e)}}function ws(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function vs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function bs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function _s(t,e){var n=St(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?gs:xs:typeof e=="function"?n.local?bs:vs:n.local?ws:ys)(n,e))}function Ce(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ks(t){return function(){this.style.removeProperty(t)}}function Ns(t,e,n){return function(){this.style.setProperty(t,e,n)}}function js(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function As(t,e,n){return arguments.length>1?this.each((e==null?ks:typeof e=="function"?js:Ns)(t,e,n??"")):it(this.node(),t)}function it(t,e){return t.style.getPropertyValue(e)||Ce(t).getComputedStyle(t,null).getPropertyValue(e)}function Ss(t){return function(){delete this[t]}}function Cs(t,e){return function(){this[t]=e}}function Ms(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Es(t,e){return arguments.length>1?this.each((e==null?Ss:typeof e=="function"?Ms:Cs)(t,e)):this.node()[t]}function Me(t){return t.trim().split(/^|\s+/)}function Yt(t){return t.classList||new Ee(t)}function Ee(t){this._node=t,this._names=Me(t.getAttribute("class")||"")}Ee.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ze(t,e){for(var n=Yt(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function Te(t,e){for(var n=Yt(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function zs(t){return function(){ze(this,t)}}function Ts(t){return function(){Te(this,t)}}function $s(t,e){return function(){(e.apply(this,arguments)?ze:Te)(this,t)}}function Is(t,e){var n=Me(t+"");if(arguments.length<2){for(var r=Yt(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?$s:e?zs:Ts)(n,e))}function Ls(){this.textContent=""}function Rs(t){return function(){this.textContent=t}}function Ds(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Fs(t){return arguments.length?this.each(t==null?Ls:(typeof t=="function"?Ds:Rs)(t)):this.node().textContent}function Os(){this.innerHTML=""}function Bs(t){return function(){this.innerHTML=t}}function Ps(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Vs(t){return arguments.length?this.each(t==null?Os:(typeof t=="function"?Ps:Bs)(t)):this.node().innerHTML}function Hs(){this.nextSibling&&this.parentNode.appendChild(this)}function qs(){return this.each(Hs)}function Us(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xs(){return this.each(Us)}function Gs(t){var e=typeof t=="function"?t:ke(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ks(){return null}function Ys(t,e){var n=typeof t=="function"?t:ke(t),r=e==null?Ks:typeof e=="function"?e:Kt(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ws(){var t=this.parentNode;t&&t.removeChild(this)}function Zs(){return this.each(Ws)}function Js(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Qs(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ti(t){return this.select(t?Qs:Js)}function ei(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ni(t){return function(e){t.call(this,e,this.__data__)}}function ri(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function si(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,i;n<s;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++r]=i;++r?e.length=r:delete this.__on}}}function ii(t,e,n){return function(){var r=this.__on,s,i=ni(e);if(r){for(var a=0,c=r.length;a<c;++a)if((s=r[a]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=e;return}}this.addEventListener(t.type,i,n),s={type:t.type,name:t.name,value:e,listener:i,options:n},r?r.push(s):this.__on=[s]}}function ai(t,e,n){var r=ri(t+""),s,i=r.length,a;if(arguments.length<2){var c=this.node().__on;if(c){for(var u=0,o=c.length,h;u<o;++u)for(s=0,h=c[u];s<i;++s)if((a=r[s]).type===h.type&&a.name===h.name)return h.value}return}for(c=e?ii:si,s=0;s<i;++s)this.each(c(r[s],e,n));return this}function $e(t,e,n){var r=Ce(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function oi(t,e){return function(){return $e(this,t,e)}}function li(t,e){return function(){return $e(this,t,e.apply(this,arguments))}}function ci(t,e){return this.each((typeof e=="function"?li:oi)(t,e))}function*ui(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,i=r.length,a;s<i;++s)(a=r[s])&&(yield a)}var Ie=[null];function B(t,e){this._groups=t,this._parents=e}function ft(){return new B([[document.documentElement]],Ie)}function hi(){return this}B.prototype=ft.prototype={constructor:B,select:Dr,selectAll:Pr,selectChild:Ur,selectChildren:Yr,filter:Wr,data:ns,enter:Zr,exit:ss,join:is,merge:as,selection:hi,order:os,sort:ls,call:us,nodes:hs,node:ds,size:fs,empty:ps,each:ms,attr:_s,style:As,property:Es,classed:Is,text:Fs,html:Vs,raise:qs,lower:Xs,append:Gs,insert:Ys,remove:Zs,clone:ti,datum:ei,on:ai,dispatch:ci,[Symbol.iterator]:ui};function P(t){return typeof t=="string"?new B([[document.querySelector(t)]],[document.documentElement]):new B([[t]],Ie)}function di(t){let e;for(;e=t.sourceEvent;)t=e;return t}function tt(t,e){if(t=di(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ot={capture:!0,passive:!1};function Bt(t){t.preventDefault(),t.stopImmediatePropagation()}function fi(t){var e=t.document.documentElement,n=P(t).on("dragstart.drag",Bt,Ot);"onselectstart"in e?n.on("selectstart.drag",Bt,Ot):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function pi(t,e){var n=t.document.documentElement,r=P(t).on("dragstart.drag",null);e&&(r.on("click.drag",Bt,Ot),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var at=0,ct=0,ot=0,Le=1e3,kt,ut,Nt=0,nt=0,Ct=0,dt=typeof performance=="object"&&performance.now?performance:Date,Re=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Wt(){return nt||(Re(mi),nt=dt.now()+Ct)}function mi(){nt=0}function jt(){this._call=this._time=this._next=null}jt.prototype=De.prototype={constructor:jt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Wt():+n)+(e==null?0:+e),!this._next&&ut!==this&&(ut?ut._next=this:kt=this,ut=this),this._call=t,this._time=n,Pt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pt())}};function De(t,e,n){var r=new jt;return r.restart(t,e,n),r}function xi(){Wt(),++at;for(var t=kt,e;t;)(e=nt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--at}function ce(){nt=(Nt=dt.now())+Ct,at=ct=0;try{xi()}finally{at=0,yi(),nt=0}}function gi(){var t=dt.now(),e=t-Nt;e>Le&&(Ct-=e,Nt=t)}function yi(){for(var t,e=kt,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:kt=n);ut=t,Pt(r)}function Pt(t){if(!at){ct&&(ct=clearTimeout(ct));var e=t-nt;e>24?(t<1/0&&(ct=setTimeout(ce,t-dt.now()-Ct)),ot&&(ot=clearInterval(ot))):(ot||(Nt=dt.now(),ot=setInterval(gi,Le)),at=1,Re(ce))}}function ue(t,e,n){var r=new jt;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var wi=Gt("start","end","cancel","interrupt"),vi=[],Fe=0,he=1,Vt=2,wt=3,de=4,Ht=5,vt=6;function Mt(t,e,n,r,s,i){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;bi(t,n,{name:e,index:r,group:s,on:wi,tween:vi,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Fe})}function Zt(t,e){var n=q(t,e);if(n.state>Fe)throw new Error("too late; already scheduled");return n}function G(t,e){var n=q(t,e);if(n.state>wt)throw new Error("too late; already running");return n}function q(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function bi(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=De(i,0,n.time);function i(o){n.state=he,n.timer.restart(a,n.delay,n.time),n.delay<=o&&a(o-n.delay)}function a(o){var h,p,f,x;if(n.state!==he)return u();for(h in r)if(x=r[h],x.name===n.name){if(x.state===wt)return ue(a);x.state===de?(x.state=vt,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete r[h]):+h<e&&(x.state=vt,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete r[h])}if(ue(function(){n.state===wt&&(n.state=de,n.timer.restart(c,n.delay,n.time),c(o))}),n.state=Vt,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Vt){for(n.state=wt,s=new Array(f=n.tween.length),h=0,p=-1;h<f;++h)(x=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(s[++p]=x);s.length=p+1}}function c(o){for(var h=o<n.duration?n.ease.call(null,o/n.duration):(n.timer.restart(u),n.state=Ht,1),p=-1,f=s.length;++p<f;)s[p].call(t,h);n.state===Ht&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=vt,n.timer.stop(),delete r[e];for(var o in r)return;delete t.__transition}}function bt(t,e){var n=t.__transition,r,s,i=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){i=!1;continue}s=r.state>Vt&&r.state<Ht,r.state=vt,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}i&&delete t.__transition}}function _i(t){return this.each(function(){bt(this,t)})}function ki(t,e){var n,r;return function(){var s=G(this,t),i=s.tween;if(i!==n){r=n=i;for(var a=0,c=r.length;a<c;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}s.tween=r}}function Ni(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=G(this,t),a=i.tween;if(a!==r){s=(r=a).slice();for(var c={name:e,value:n},u=0,o=s.length;u<o;++u)if(s[u].name===e){s[u]=c;break}u===o&&s.push(c)}i.tween=s}}function ji(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=q(this.node(),n).tween,s=0,i=r.length,a;s<i;++s)if((a=r[s]).name===t)return a.value;return null}return this.each((e==null?ki:Ni)(n,t,e))}function Jt(t,e,n){var r=t._id;return t.each(function(){var s=G(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return q(s,r).value[e]}}function Oe(t,e){var n;return(typeof e=="number"?et:e instanceof ne?ee:(n=ne(e))?(e=n,ee):We)(t,e)}function Ai(t){return function(){this.removeAttribute(t)}}function Si(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ci(t,e,n){var r,s=n+"",i;return function(){var a=this.getAttribute(t);return a===s?null:a===r?i:i=e(r=a,n)}}function Mi(t,e,n){var r,s=n+"",i;return function(){var a=this.getAttributeNS(t.space,t.local);return a===s?null:a===r?i:i=e(r=a,n)}}function Ei(t,e,n){var r,s,i;return function(){var a,c=n(this),u;return c==null?void this.removeAttribute(t):(a=this.getAttribute(t),u=c+"",a===u?null:a===r&&u===s?i:(s=u,i=e(r=a,c)))}}function zi(t,e,n){var r,s,i;return function(){var a,c=n(this),u;return c==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),u=c+"",a===u?null:a===r&&u===s?i:(s=u,i=e(r=a,c)))}}function Ti(t,e){var n=St(t),r=n==="transform"?Gn:Oe;return this.attrTween(t,typeof e=="function"?(n.local?zi:Ei)(n,r,Jt(this,"attr."+t,e)):e==null?(n.local?Si:Ai)(n):(n.local?Mi:Ci)(n,r,e))}function $i(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ii(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Li(t,e){var n,r;function s(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Ii(t,i)),n}return s._value=e,s}function Ri(t,e){var n,r;function s(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&$i(t,i)),n}return s._value=e,s}function Di(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=St(t);return this.tween(n,(r.local?Li:Ri)(r,e))}function Fi(t,e){return function(){Zt(this,t).delay=+e.apply(this,arguments)}}function Oi(t,e){return e=+e,function(){Zt(this,t).delay=e}}function Bi(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fi:Oi)(e,t)):q(this.node(),e).delay}function Pi(t,e){return function(){G(this,t).duration=+e.apply(this,arguments)}}function Vi(t,e){return e=+e,function(){G(this,t).duration=e}}function Hi(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Pi:Vi)(e,t)):q(this.node(),e).duration}function qi(t,e){if(typeof e!="function")throw new Error;return function(){G(this,t).ease=e}}function Ui(t){var e=this._id;return arguments.length?this.each(qi(e,t)):q(this.node(),e).ease}function Xi(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;G(this,t).ease=n}}function Gi(t){if(typeof t!="function")throw new Error;return this.each(Xi(this._id,t))}function Ki(t){typeof t!="function"&&(t=je(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var i=e[s],a=i.length,c=r[s]=[],u,o=0;o<a;++o)(u=i[o])&&t.call(u,u.__data__,o,i)&&c.push(u);return new J(r,this._parents,this._name,this._id)}function Yi(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,i=Math.min(r,s),a=new Array(r),c=0;c<i;++c)for(var u=e[c],o=n[c],h=u.length,p=a[c]=new Array(h),f,x=0;x<h;++x)(f=u[x]||o[x])&&(p[x]=f);for(;c<r;++c)a[c]=e[c];return new J(a,this._parents,this._name,this._id)}function Wi(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Zi(t,e,n){var r,s,i=Wi(e)?Zt:G;return function(){var a=i(this,t),c=a.on;c!==r&&(s=(r=c).copy()).on(e,n),a.on=s}}function Ji(t,e){var n=this._id;return arguments.length<2?q(this.node(),n).on.on(t):this.each(Zi(n,t,e))}function Qi(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function ta(){return this.on("end.remove",Qi(this._id))}function ea(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Kt(t));for(var r=this._groups,s=r.length,i=new Array(s),a=0;a<s;++a)for(var c=r[a],u=c.length,o=i[a]=new Array(u),h,p,f=0;f<u;++f)(h=c[f])&&(p=t.call(h,h.__data__,f,c))&&("__data__"in h&&(p.__data__=h.__data__),o[f]=p,Mt(o[f],e,n,f,o,q(h,n)));return new J(i,this._parents,e,n)}function na(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ne(t));for(var r=this._groups,s=r.length,i=[],a=[],c=0;c<s;++c)for(var u=r[c],o=u.length,h,p=0;p<o;++p)if(h=u[p]){for(var f=t.call(h,h.__data__,p,u),x,k=q(h,n),_=0,A=f.length;_<A;++_)(x=f[_])&&Mt(x,e,n,_,f,k);i.push(f),a.push(h)}return new J(i,a,e,n)}var ra=ft.prototype.constructor;function sa(){return new ra(this._groups,this._parents)}function ia(t,e){var n,r,s;return function(){var i=it(this,t),a=(this.style.removeProperty(t),it(this,t));return i===a?null:i===n&&a===r?s:s=e(n=i,r=a)}}function Be(t){return function(){this.style.removeProperty(t)}}function aa(t,e,n){var r,s=n+"",i;return function(){var a=it(this,t);return a===s?null:a===r?i:i=e(r=a,n)}}function oa(t,e,n){var r,s,i;return function(){var a=it(this,t),c=n(this),u=c+"";return c==null&&(u=c=(this.style.removeProperty(t),it(this,t))),a===u?null:a===r&&u===s?i:(s=u,i=e(r=a,c))}}function la(t,e){var n,r,s,i="style."+e,a="end."+i,c;return function(){var u=G(this,t),o=u.on,h=u.value[i]==null?c||(c=Be(e)):void 0;(o!==n||s!==h)&&(r=(n=o).copy()).on(a,s=h),u.on=r}}function ca(t,e,n){var r=(t+="")=="transform"?Xn:Oe;return e==null?this.styleTween(t,ia(t,r)).on("end.style."+t,Be(t)):typeof e=="function"?this.styleTween(t,oa(t,r,Jt(this,"style."+t,e))).each(la(this._id,t)):this.styleTween(t,aa(t,r,e),n).on("end.style."+t,null)}function ua(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ha(t,e,n){var r,s;function i(){var a=e.apply(this,arguments);return a!==s&&(r=(s=a)&&ua(t,a,n)),r}return i._value=e,i}function da(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,ha(t,e,n??""))}function fa(t){return function(){this.textContent=t}}function pa(t){return function(){var e=t(this);this.textContent=e??""}}function ma(t){return this.tween("text",typeof t=="function"?pa(Jt(this,"text",t)):fa(t==null?"":t+""))}function xa(t){return function(e){this.textContent=t.call(this,e)}}function ga(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&xa(s)),e}return r._value=t,r}function ya(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ga(t))}function wa(){for(var t=this._name,e=this._id,n=Pe(),r=this._groups,s=r.length,i=0;i<s;++i)for(var a=r[i],c=a.length,u,o=0;o<c;++o)if(u=a[o]){var h=q(u,e);Mt(u,t,n,o,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new J(r,this._parents,t,n)}function va(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(i,a){var c={value:a},u={value:function(){--s===0&&i()}};n.each(function(){var o=G(this,r),h=o.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(u)),o.on=e}),s===0&&i()})}var ba=0;function J(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Pe(){return++ba}var W=ft.prototype;J.prototype={constructor:J,select:ea,selectAll:na,selectChild:W.selectChild,selectChildren:W.selectChildren,filter:Ki,merge:Yi,selection:sa,transition:wa,call:W.call,nodes:W.nodes,node:W.node,size:W.size,empty:W.empty,each:W.each,on:Ji,attr:Ti,attrTween:Di,style:ca,styleTween:da,text:ma,textTween:ya,remove:ta,tween:ji,delay:Bi,duration:Hi,ease:Ui,easeVarying:Gi,end:va,[Symbol.iterator]:W[Symbol.iterator]};function _a(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ka={time:null,delay:0,duration:250,ease:_a};function Na(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ja(t){var e,n;t instanceof J?(e=t._id,t=t._name):(e=Pe(),(n=ka).time=Wt(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var a=r[i],c=a.length,u,o=0;o<c;++o)(u=a[o])&&Mt(u,t,e,o,a,n||Na(u,e));return new J(r,this._parents,t,e)}ft.prototype.interrupt=_i;ft.prototype.transition=ja;const mt=t=>()=>t;function Aa(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Z(t,e,n){this.k=t,this.x=e,this.y=n}Z.prototype={constructor:Z,scale:function(t){return t===1?this:new Z(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Z(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var At=new Z(1,0,0);Z.prototype;function Rt(t){t.stopImmediatePropagation()}function lt(t){t.preventDefault(),t.stopImmediatePropagation()}function Sa(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ca(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function fe(){return this.__zoom||At}function Ma(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ea(){return navigator.maxTouchPoints||"ontouchstart"in this}function za(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function xt(){var t=Sa,e=Ca,n=za,r=Ma,s=Ea,i=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],c=250,u=Zn,o=Gt("start","zoom","end"),h,p,f,x=500,k=150,_=0,A=10;function v(d){d.property("__zoom",fe).on("wheel.zoom",rt,{passive:!1}).on("mousedown.zoom",st).on("dblclick.zoom",Q).filter(s).on("touchstart.zoom",g).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(d,y,m,w){var b=d.selection?d.selection():d;b.property("__zoom",fe),d!==b?F(d,y,m,w):b.interrupt().each(function(){R(this,arguments).event(w).start().zoom(null,typeof y=="function"?y.apply(this,arguments):y).end()})},v.scaleBy=function(d,y,m,w){v.scaleTo(d,function(){var b=this.__zoom.k,N=typeof y=="function"?y.apply(this,arguments):y;return b*N},m,w)},v.scaleTo=function(d,y,m,w){v.transform(d,function(){var b=e.apply(this,arguments),N=this.__zoom,j=m==null?I(b):typeof m=="function"?m.apply(this,arguments):m,M=N.invert(j),T=typeof y=="function"?y.apply(this,arguments):y;return n(E(S(N,T),j,M),b,a)},m,w)},v.translateBy=function(d,y,m,w){v.transform(d,function(){return n(this.__zoom.translate(typeof y=="function"?y.apply(this,arguments):y,typeof m=="function"?m.apply(this,arguments):m),e.apply(this,arguments),a)},null,w)},v.translateTo=function(d,y,m,w,b){v.transform(d,function(){var N=e.apply(this,arguments),j=this.__zoom,M=w==null?I(N):typeof w=="function"?w.apply(this,arguments):w;return n(At.translate(M[0],M[1]).scale(j.k).translate(typeof y=="function"?-y.apply(this,arguments):-y,typeof m=="function"?-m.apply(this,arguments):-m),N,a)},w,b)};function S(d,y){return y=Math.max(i[0],Math.min(i[1],y)),y===d.k?d:new Z(y,d.x,d.y)}function E(d,y,m){var w=y[0]-m[0]*d.k,b=y[1]-m[1]*d.k;return w===d.x&&b===d.y?d:new Z(d.k,w,b)}function I(d){return[(+d[0][0]+ +d[1][0])/2,(+d[0][1]+ +d[1][1])/2]}function F(d,y,m,w){d.on("start.zoom",function(){R(this,arguments).event(w).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(w).end()}).tween("zoom",function(){var b=this,N=arguments,j=R(b,N).event(w),M=e.apply(b,N),T=m==null?I(M):typeof m=="function"?m.apply(b,N):m,X=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),L=b.__zoom,V=typeof y=="function"?y.apply(b,N):y,K=u(L.invert(T).concat(X/L.k),V.invert(T).concat(X/V.k));return function(H){if(H===1)H=V;else{var Y=K(H),Et=X/Y[2];H=new Z(Et,T[0]-Y[0]*Et,T[1]-Y[1]*Et)}j.zoom(null,H)}})}function R(d,y,m){return!m&&d.__zooming||new U(d,y)}function U(d,y){this.that=d,this.args=y,this.active=0,this.sourceEvent=null,this.extent=e.apply(d,y),this.taps=0}U.prototype={event:function(d){return d&&(this.sourceEvent=d),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(d,y){return this.mouse&&d!=="mouse"&&(this.mouse[1]=y.invert(this.mouse[0])),this.touch0&&d!=="touch"&&(this.touch0[1]=y.invert(this.touch0[0])),this.touch1&&d!=="touch"&&(this.touch1[1]=y.invert(this.touch1[0])),this.that.__zoom=y,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(d){var y=P(this.that).datum();o.call(d,this.that,new Aa(d,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:o}),y)}};function rt(d,...y){if(!t.apply(this,arguments))return;var m=R(this,y).event(d),w=this.__zoom,b=Math.max(i[0],Math.min(i[1],w.k*Math.pow(2,r.apply(this,arguments)))),N=tt(d);if(m.wheel)(m.mouse[0][0]!==N[0]||m.mouse[0][1]!==N[1])&&(m.mouse[1]=w.invert(m.mouse[0]=N)),clearTimeout(m.wheel);else{if(w.k===b)return;m.mouse=[N,w.invert(N)],bt(this),m.start()}lt(d),m.wheel=setTimeout(j,k),m.zoom("mouse",n(E(S(w,b),m.mouse[0],m.mouse[1]),m.extent,a));function j(){m.wheel=null,m.end()}}function st(d,...y){if(f||!t.apply(this,arguments))return;var m=d.currentTarget,w=R(this,y,!0).event(d),b=P(d.view).on("mousemove.zoom",T,!0).on("mouseup.zoom",X,!0),N=tt(d,m),j=d.clientX,M=d.clientY;fi(d.view),Rt(d),w.mouse=[N,this.__zoom.invert(N)],bt(this),w.start();function T(L){if(lt(L),!w.moved){var V=L.clientX-j,K=L.clientY-M;w.moved=V*V+K*K>_}w.event(L).zoom("mouse",n(E(w.that.__zoom,w.mouse[0]=tt(L,m),w.mouse[1]),w.extent,a))}function X(L){b.on("mousemove.zoom mouseup.zoom",null),pi(L.view,w.moved),lt(L),w.event(L).end()}}function Q(d,...y){if(t.apply(this,arguments)){var m=this.__zoom,w=tt(d.changedTouches?d.changedTouches[0]:d,this),b=m.invert(w),N=m.k*(d.shiftKey?.5:2),j=n(E(S(m,N),w,b),e.apply(this,y),a);lt(d),c>0?P(this).transition().duration(c).call(F,j,w,d):P(this).call(v.transform,j,w,d)}}function g(d,...y){if(t.apply(this,arguments)){var m=d.touches,w=m.length,b=R(this,y,d.changedTouches.length===w).event(d),N,j,M,T;for(Rt(d),j=0;j<w;++j)M=m[j],T=tt(M,this),T=[T,this.__zoom.invert(T),M.identifier],b.touch0?!b.touch1&&b.touch0[2]!==T[2]&&(b.touch1=T,b.taps=0):(b.touch0=T,N=!0,b.taps=1+!!h);h&&(h=clearTimeout(h)),N&&(b.taps<2&&(p=T[0],h=setTimeout(function(){h=null},x)),bt(this),b.start())}}function D(d,...y){if(this.__zooming){var m=R(this,y).event(d),w=d.changedTouches,b=w.length,N,j,M,T;for(lt(d),N=0;N<b;++N)j=w[N],M=tt(j,this),m.touch0&&m.touch0[2]===j.identifier?m.touch0[0]=M:m.touch1&&m.touch1[2]===j.identifier&&(m.touch1[0]=M);if(j=m.that.__zoom,m.touch1){var X=m.touch0[0],L=m.touch0[1],V=m.touch1[0],K=m.touch1[1],H=(H=V[0]-X[0])*H+(H=V[1]-X[1])*H,Y=(Y=K[0]-L[0])*Y+(Y=K[1]-L[1])*Y;j=S(j,Math.sqrt(H/Y)),M=[(X[0]+V[0])/2,(X[1]+V[1])/2],T=[(L[0]+K[0])/2,(L[1]+K[1])/2]}else if(m.touch0)M=m.touch0[0],T=m.touch0[1];else return;m.zoom("touch",n(E(j,M,T),m.extent,a))}}function O(d,...y){if(this.__zooming){var m=R(this,y).event(d),w=d.changedTouches,b=w.length,N,j;for(Rt(d),f&&clearTimeout(f),f=setTimeout(function(){f=null},x),N=0;N<b;++N)j=w[N],m.touch0&&m.touch0[2]===j.identifier?delete m.touch0:m.touch1&&m.touch1[2]===j.identifier&&delete m.touch1;if(m.touch1&&!m.touch0&&(m.touch0=m.touch1,delete m.touch1),m.touch0)m.touch0[1]=this.__zoom.invert(m.touch0[0]);else if(m.end(),m.taps===2&&(j=tt(j,this),Math.hypot(p[0]-j[0],p[1]-j[1])<A)){var M=P(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return v.wheelDelta=function(d){return arguments.length?(r=typeof d=="function"?d:mt(+d),v):r},v.filter=function(d){return arguments.length?(t=typeof d=="function"?d:mt(!!d),v):t},v.touchable=function(d){return arguments.length?(s=typeof d=="function"?d:mt(!!d),v):s},v.extent=function(d){return arguments.length?(e=typeof d=="function"?d:mt([[+d[0][0],+d[0][1]],[+d[1][0],+d[1][1]]]),v):e},v.scaleExtent=function(d){return arguments.length?(i[0]=+d[0],i[1]=+d[1],v):[i[0],i[1]]},v.translateExtent=function(d){return arguments.length?(a[0][0]=+d[0][0],a[1][0]=+d[1][0],a[0][1]=+d[0][1],a[1][1]=+d[1][1],v):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},v.constrain=function(d){return arguments.length?(n=d,v):n},v.duration=function(d){return arguments.length?(c=+d,v):c},v.interpolate=function(d){return arguments.length?(u=d,v):u},v.on=function(){var d=o.on.apply(o,arguments);return d===o?v:d},v.clickDistance=function(d){return arguments.length?(_=(d=+d)*d,v):Math.sqrt(_)},v.tapDistance=function(d){return arguments.length?(A=+d,v):A},v}const Ta=t=>{switch(t){case C.SAFE:return"#10b981";case C.CAUTION:return"#f59e0b";case C.HIGH:return"#f43f5e";default:return"#94a3b8"}},$a=({audits:t})=>{const[e,n]=$.useState(null),r=$.useRef(null),s=$.useRef(null),[i,a]=$.useState(1),c=$.useMemo(()=>({name:"Project Root",version:"",license:"N/A",riskLevel:C.UNKNOWN,reason:"Primary entry point",isFriendly:!0,children:t}),[t]),u=$.useMemo(()=>{const _=Xt(c);return Er().nodeSize([80,240])(_)},[c]);$.useEffect(()=>{if(!r.current||!s.current)return;const _=P(r.current),A=P(s.current),v=xt().scaleExtent([.1,3]).on("zoom",E=>{A.attr("transform",E.transform),a(E.transform.k)});_.call(v);const S=At.translate(100,350).scale(.8);return _.call(v.transform,S),()=>{_.on(".zoom",null)}},[]);const o=()=>{r.current&&P(r.current).transition().call(xt().scaleBy,1.3)},h=()=>{r.current&&P(r.current).transition().call(xt().scaleBy,.7)},p=()=>{r.current&&P(r.current).transition().call(xt().transform,At.translate(100,350).scale(.8))},f=u.descendants(),x=u.links(),k=_=>_?.toLowerCase().includes("github.com");return l.jsxs("div",{className:"relative w-full h-[700px] bg-[#f8f9fa] dark:bg-slate-950 rounded-2xl border border-slate-200 dark:border-slate-800 overflow-hidden shadow-inner group",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"radial-gradient(#000 1px, transparent 0)",backgroundSize:"24px 24px"}}),l.jsxs("div",{className:"absolute top-4 left-4 z-10 flex gap-2",children:[l.jsxs("div",{className:"bg-white/90 dark:bg-slate-900/90 backdrop-blur-md px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-800 shadow-sm flex items-center gap-2",children:[l.jsx(An,{className:"w-3.5 h-3.5 text-blue-500"}),l.jsx("span",{className:"text-[10px] text-slate-600 dark:text-slate-400 font-bold uppercase tracking-wider text-nowrap",children:"Drag to Pan  Scroll to Zoom"})]}),l.jsx("div",{className:"bg-white/90 dark:bg-slate-900/90 backdrop-blur-md px-3 py-1.5 rounded-lg border border-slate-200 dark:border-slate-800 shadow-sm flex items-center gap-2",children:l.jsxs("span",{className:"text-[10px] text-slate-600 dark:text-slate-400 font-bold uppercase tracking-wider text-nowrap",children:["Zoom: ",Math.round(i*100),"%"]})})]}),l.jsxs("div",{className:"absolute bottom-6 left-6 z-10 flex flex-col gap-2",children:[l.jsx("button",{onClick:o,className:"p-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-slate-600 dark:text-slate-400",children:l.jsx(Dn,{className:"w-5 h-5"})}),l.jsx("button",{onClick:h,className:"p-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-slate-600 dark:text-slate-400",children:l.jsx(On,{className:"w-5 h-5"})}),l.jsx("button",{onClick:p,className:"p-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-slate-600 dark:text-slate-400",children:l.jsx(Nn,{className:"w-5 h-5"})})]}),l.jsx("svg",{ref:r,width:"100%",height:"100%",className:"cursor-grab active:cursor-grabbing outline-none",children:l.jsxs("g",{ref:s,children:[x.map((_,A)=>l.jsx("path",{d:Hn().x(v=>v.y).y(v=>v.x)({source:_.source,target:_.target})||void 0,fill:"none",stroke:"#cbd5e1",strokeWidth:"2",strokeDasharray:"4"},`link-${A}`)),f.map((_,A)=>l.jsxs("g",{transform:`translate(${_.y},${_.x})`,onClick:()=>n(_.data),className:"cursor-pointer group/node",children:[l.jsx("circle",{r:"6",fill:Ta(_.data.riskLevel),stroke:"#fff",strokeWidth:"2",className:"group-hover/node:r-8 transition-all"}),l.jsx("text",{dy:".31em",x:_.children?-12:12,style:{textAnchor:_.children?"end":"start",fontSize:"11px",fontWeight:800,fill:"currentColor"},className:"text-slate-900 dark:text-slate-200",children:_.data.name})]},`node-${A}`))]})}),e&&l.jsxs("div",{className:"absolute top-4 right-4 w-80 bg-white/95 dark:bg-slate-900/95 backdrop-blur-md p-6 rounded-3xl border border-slate-200 dark:border-slate-800 shadow-2xl animate-in fade-in slide-in-from-right-4",children:[l.jsx("button",{onClick:()=>n(null),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:l.jsx(xe,{className:"w-4 h-4"})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-black text-slate-900 dark:text-white pr-6",children:e.name}),l.jsxs("p",{className:"text-[10px] text-slate-400 font-mono",children:["v",e.version]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[l.jsx("span",{className:"px-2.5 py-1 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 text-[10px] font-black rounded-lg border border-blue-100 dark:border-blue-800 uppercase tracking-tight",children:e.license}),l.jsx("span",{className:`px-2.5 py-1 text-[10px] font-black rounded-lg uppercase border tracking-tight ${e.riskLevel===C.SAFE?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-900/30 dark:text-emerald-400 dark:border-emerald-800":e.riskLevel===C.CAUTION?"bg-amber-50 text-amber-700 border-amber-100 dark:bg-amber-900/30 dark:text-amber-400 dark:border-amber-800":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-rose-900/30 dark:text-rose-400 dark:border-rose-800"}`,children:e.riskLevel})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Audit Reasoning"}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 leading-relaxed",children:e.reason})]}),e.repository&&l.jsxs("a",{href:e.repository,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-[10px] font-black text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 transition-colors uppercase tracking-widest",children:[k(e.repository)?l.jsx(Ut,{className:"w-3.5 h-3.5"}):l.jsx(ge,{className:"w-3.5 h-3.5"}),"View Source ",l.jsx(mn,{className:"w-3 h-3"})]})]})]})]})},pe={[C.HIGH]:3,[C.CAUTION]:2,[C.SAFE]:1,[C.UNKNOWN]:0},Ia=({className:t})=>l.jsxs("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 7h-9"}),l.jsx("path",{d:"M14 17H5"}),l.jsx("circle",{cx:"17",cy:"17",r:"3"}),l.jsx("circle",{cx:"7",cy:"7",r:"3"})]}),me=({type:t,size:e="w-5 h-5"})=>{switch(t){case"npm":return l.jsx("div",{className:"p-1.5 rounded-lg bg-[#CB3837]/10 text-[#CB3837]",children:l.jsx(tn,{className:e})});case"python":return l.jsx("div",{className:"p-1.5 rounded-lg bg-[#3776AB]/10 text-[#3776AB]",children:l.jsx(cn,{className:e})});case"go":return l.jsx("div",{className:"p-1.5 rounded-lg bg-[#00ADD8]/10 text-[#00ADD8]",children:l.jsx(fn,{className:e})});case"rust":return l.jsx("div",{className:"p-1.5 rounded-lg bg-[#000000]/10 dark:bg-white/10 text-black dark:text-white",children:l.jsx(hn,{className:e})});case"maven":return l.jsx("div",{className:"p-1.5 rounded-lg bg-[#C71A36]/10 text-[#C71A36]",children:l.jsx(En,{className:e})});case"gradle":return l.jsx("div",{className:"p-1.5 rounded-lg bg-[#02303A]/10 text-[#02303A] dark:text-[#00DE7A]",children:l.jsx(Ia,{className:e})});case"swift":return l.jsx("div",{className:"p-1.5 rounded-lg bg-[#F05138]/10 text-[#F05138]",children:l.jsx(gn,{className:e})});default:return l.jsx("div",{className:"p-1.5 rounded-lg bg-slate-100 dark:bg-white/5 text-slate-400",children:l.jsx(ye,{className:e})})}},La=()=>{const{t}=qt(),[e,n]=$.useState(""),[r,s]=$.useState(""),[i,a]=$.useState(!1),[c,u]=$.useState(!1),[o,h]=$.useState([]),[p,f]=$.useState("table"),[x,k]=$.useState(null),[_,A]=$.useState(!1),[v,S]=$.useState(!1),E=o.length>0&&o.every(g=>g.status==="success"||g.status==="error"),I=$.useMemo(()=>[...o].sort((g,D)=>{const O=g.result?pe[g.result.riskLevel]:-1,d=D.result?pe[D.result.riskLevel]:-1;return d!==O?d-O:g.name.localeCompare(D.name)}),[o]);$.useEffect(()=>{if(E&&o.length>0&&!c){const g=setTimeout(()=>{A(!0),window.scrollTo({top:100,behavior:"smooth"})},1200);return()=>clearTimeout(g)}},[E,o.length,c]);const F=async()=>{if(r.trim()){a(!0),k(null);try{let g=r.trim();g.includes("github.com")&&!g.includes("raw.githubusercontent.com")&&!g.includes("/raw/")&&(g=g.replace("github.com","raw.githubusercontent.com").replace("/blob/","/"));const D=await fetch(g);if(!D.ok)throw new Error(`HTTP error! status: ${D.status}`);const O=await D.text();n(O)}catch(g){k(`Failed to fetch URL: ${g.message}`)}finally{a(!1)}}},R=g=>{const D=g.license?.toUpperCase()||"UNKNOWN",d=["MIT","ISC","BSD","APACHE","UNLICENSE","ZLIB","WTFPL","PUBLIC DOMAIN"].some(N=>D.includes(N));let y=g.riskLevel,m=g.isFriendly,w=g.reason;d&&(y=C.SAFE,m=!0,g.riskLevel!==C.SAFE&&(w=`[Auto-Correction] ${g.license} is a permissive and safe license. Original check suggested: ${g.reason}`));const b=g.repository||(g.name.includes("/")?`https://github.com/${g.name}`:`https://www.google.com/search?q=${g.name}+repo`);return{...g,repository:b,riskLevel:y,isFriendly:m,reason:w}},U=async()=>{if(!e.trim())return;u(!0),k(null),A(!1);const g=tr(e);if(g.length===0){k(t("audit.noDeps")),u(!1);return}const D=g.map(y=>({name:y.name,version:y.version,status:"pending"})),O=[],d=[...D];if(g.forEach((y,m)=>{const w=y.name.toLowerCase(),b=Ve[w];if(b&&b.license&&Qt[b.license]){const j=Qt[b.license],M={name:y.name,version:y.version,license:b.license,repository:b.repository||`https://www.npmjs.com/package/${y.name}`,riskLevel:j.risk,isFriendly:j.friendly,reason:`[Internal DB] ${j.reason}`,sources:["System Database"]};d[m]={...d[m],status:"success",result:R(M)};return}const N=nr(y.name,y.version);if(N){d[m]={...d[m],status:"success",result:R(N)};return}O.push({...y,index:m}),d[m].status="loading"}),h(d),O.length===0){u(!1);return}try{const y=await Jn(O.map(m=>({name:m.name,version:m.version})));h(m=>{const w=[...m];return y.forEach(b=>{const N=O.find(j=>j.name.toLowerCase()===b.name.toLowerCase());if(N){const j=R(b);er(j),w[N.index]={...w[N.index],status:"success",result:j}}}),w.forEach(b=>{b.status==="loading"&&(b.status="error",b.error="No response")}),w})}catch{h(m=>{const w=[...m];return O.forEach(b=>{w[b.index].status==="loading"&&(w[b.index].status="error",w[b.index].error="Batch scan failed")}),w})}finally{u(!1)}},rt=()=>{h([]),n(""),s(""),k(null),A(!1)},st=g=>g?.toLowerCase().includes("github.com"),Q=["npm","python","go","rust","maven","gradle","swift"];return l.jsx("div",{className:"max-w-5xl mx-auto px-6 pt-16 pb-24",children:o.length===0?l.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-black dark:text-white tracking-tighter mb-4",children:t("audit.title")}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:t("audit.desc")})]}),l.jsxs("div",{className:"space-y-4 mb-8",children:[l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none",children:l.jsx(on,{className:"h-4 w-4 text-slate-400"})}),l.jsx("input",{type:"text",value:r,onChange:g=>s(g.target.value),onKeyDown:g=>g.key==="Enter"&&F(),placeholder:t("audit.urlPlaceholder"),className:"block w-full pl-10 pr-24 py-3 bg-white dark:bg-[#0A0A0A] border border-slate-200 dark:border-white/10 rounded-2xl text-sm outline-none focus:border-black dark:focus:border-white/30 transition-all placeholder:text-slate-400 font-medium"}),l.jsxs("div",{className:"absolute inset-y-0 right-1.5 flex items-center gap-1",children:[r&&l.jsx("button",{onClick:()=>s(""),className:"p-1.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors",children:l.jsx(xe,{className:"w-3.5 h-3.5"})}),l.jsx("button",{onClick:F,disabled:i||!r,className:"px-4 py-1.5 bg-black dark:bg-white text-white dark:text-black rounded-xl text-xs font-bold disabled:opacity-50 transition-all active:scale-95",children:i?l.jsx($t,{className:"w-3.5 h-3.5 animate-spin"}):t("audit.fetchBtn")})]})]}),l.jsxs("div",{className:"bg-white dark:bg-[#0A0A0A] rounded-2xl border border-slate-200 dark:border-white/10 shadow-[0_0_50px_-12px_rgba(0,0,0,0.12)] dark:shadow-none overflow-hidden group focus-within:border-black dark:focus-within:border-white/30 transition-all",children:[l.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-white/5 bg-slate-50/50 dark:bg-white/[0.02] flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-slate-400 uppercase tracking-widest",children:[l.jsx(ye,{className:"w-3.5 h-3.5"})," ",t("audit.inputLabel")]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>n(`module github.com/user/project

go 1.18

require (
  github.com/gin-gonic/gin v1.8.1
  github.com/sirupsen/logrus v1.9.0
)`),className:"text-[10px] font-bold text-blue-500 hover:text-blue-600 dark:text-blue-400",children:"Go Mod"}),l.jsx("button",{onClick:()=>n(`[dependencies]
serde = "1.0"
tokio = { version = "1.0", features = ["full"] }`),className:"text-[10px] font-bold text-blue-500 hover:text-blue-600 dark:text-blue-400",children:"Cargo"}),l.jsx("button",{onClick:()=>n(`{
  "dependencies": {
    "react": "^19.0.0",
    "next": "latest"
  }
}`),className:"text-[10px] font-bold text-blue-500 hover:text-blue-600 dark:text-blue-400",children:"NPM"})]})]}),l.jsx("textarea",{className:"w-full h-72 p-6 text-sm font-mono bg-transparent dark:text-slate-200 outline-none resize-none placeholder:text-slate-400 dark:placeholder:text-slate-600",placeholder:t("audit.placeholder"),value:e,onChange:g=>n(g.target.value)}),l.jsxs("div",{className:"p-4 flex items-center justify-between bg-slate-50/50 dark:bg-white/[0.02] border-t border-slate-100 dark:border-white/5",children:[l.jsx("div",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-tight",children:"Support: NPM, Maven, Go, Rust, Gradle, Swift"}),l.jsxs("button",{onClick:U,disabled:c||!e.trim(),className:`px-6 py-2 rounded-lg flex items-center justify-center gap-2 text-sm font-bold transition-all ${c||!e.trim()?"bg-slate-200 dark:bg-white/5 text-slate-400":"bg-black dark:bg-white text-white dark:text-black hover:opacity-90 active:scale-95 shadow-lg"}`,children:[c?l.jsx($t,{className:"w-4 h-4 animate-spin"}):t("audit.run"),!c&&l.jsx(He,{className:"w-4 h-4"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-[#0A0A0A] rounded-2xl border border-slate-200 dark:border-white/10 overflow-hidden transition-all shadow-sm",children:[l.jsxs("button",{onClick:()=>S(!v),className:"w-full flex items-center justify-between px-4 py-3 bg-slate-50/50 dark:bg-white/[0.02] hover:bg-slate-100 dark:hover:bg-white/[0.05] transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[l.jsx(qe,{className:"w-3.5 h-3.5"})," ",t("audit.supportedTitle")]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"flex -space-x-1.5",children:[Q.slice(0,4).map(g=>l.jsx("div",{className:"w-5 h-5 rounded-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-white/10 flex items-center justify-center",children:l.jsx(me,{type:g,size:"w-2.5 h-2.5"})},g)),l.jsxs("div",{className:"w-5 h-5 rounded-full bg-slate-100 dark:bg-slate-700 border border-slate-200 dark:border-white/10 flex items-center justify-center text-[8px] font-bold",children:["+",Q.length-4]})]}),l.jsx(sn,{className:`w-4 h-4 text-slate-400 transition-transform ${v?"rotate-90":""}`})]})]}),v&&l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 p-6 border-t border-slate-100 dark:border-white/5 animate-in slide-in-from-top-2 duration-300",children:Q.map(g=>l.jsxs("div",{className:"p-4 bg-slate-50/50 dark:bg-white/[0.02] rounded-xl border border-slate-100 dark:border-white/5 group hover:border-black/10 dark:hover:border-white/10 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx(me,{type:g}),l.jsx("span",{className:"text-[11px] font-black text-black dark:text-white uppercase tracking-tight",children:t(`audit.formats.${g}.name`)})]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Target File"}),l.jsx("code",{className:"text-[10px] font-mono text-blue-500 dark:text-blue-400 bg-blue-500/5 px-2 py-1 rounded inline-block w-fit",children:t(`audit.formats.${g}.file`)})]})]},g))})]})]}),x&&l.jsxs("div",{className:"mt-6 p-4 bg-rose-50 dark:bg-rose-900/10 border border-rose-100 dark:border-rose-900/30 rounded-xl flex items-center gap-3 text-rose-600 dark:text-rose-400 text-xs font-medium",children:[l.jsx(Ln,{className:"w-4 h-4"}),x]})]}):l.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6 pb-6 border-b border-slate-200 dark:border-white/10",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-black dark:text-white tracking-tight",children:t(E?"audit.completed":"audit.scanning")}),l.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[l.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-rose-500"})," ",t("audit.riskHigh")]}),l.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"})," ",t("audit.riskSafe")]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:rt,className:"px-4 py-2 bg-slate-100 dark:bg-white/5 hover:bg-slate-200 dark:hover:bg-white/10 text-slate-600 dark:text-slate-300 rounded-lg text-xs font-bold transition-all flex items-center gap-2",children:[l.jsx(Tn,{className:"w-3.5 h-3.5"})," ",t("audit.startOver")]}),E&&l.jsx("button",{onClick:()=>A(!_),className:"px-4 py-2 bg-black dark:bg-white text-white dark:text-black rounded-lg text-xs font-bold transition-all flex items-center gap-2 shadow-xl hover:scale-105",children:t(_?"audit.showQueue":"audit.showReport")})]})]}),_?l.jsxs("div",{className:"space-y-12 animate-in fade-in slide-in-from-top-4 duration-700",children:[l.jsx(sr,{audits:o.filter(g=>g.result).map(g=>g.result)}),l.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 dark:border-white/10 pb-4",children:[l.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[t("audit.resultsTitle")," ",l.jsx(nn,{className:"w-3 h-3"})]}),l.jsxs("div",{className:"flex bg-slate-100 dark:bg-white/5 p-1 rounded-lg",children:[l.jsxs("button",{onClick:()=>f("table"),className:`px-3 py-1.5 rounded-md text-[10px] font-black uppercase transition-all flex items-center gap-2 ${p==="table"?"bg-white dark:bg-white/10 text-black dark:text-white shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[l.jsx(wn,{className:"w-3 h-3"})," Table"]}),l.jsxs("button",{onClick:()=>f("tree"),className:`px-3 py-1.5 rounded-md text-[10px] font-black uppercase transition-all flex items-center gap-2 ${p==="tree"?"bg-white dark:bg-white/10 text-black dark:text-white shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[l.jsx(Cn,{className:"w-3 h-3"})," Graph"]})]})]}),p==="table"?l.jsx(rr,{audits:o.filter(g=>g.result).map(g=>g.result)}):l.jsx($a,{audits:o.filter(g=>g.result).map(g=>g.result)})]}):l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map((g,D)=>l.jsxs("div",{className:`p-5 rounded-2xl border transition-all duration-300 flex flex-col justify-between group h-full ${g.status==="success"?"bg-white dark:bg-[#0A0A0A] border-slate-200 dark:border-white/10 shadow-sm":g.status==="loading"?"bg-white dark:bg-[#0A0A0A] border-blue-500 ring-4 ring-blue-500/5":g.status==="error"?"bg-rose-50/50 dark:bg-rose-900/5 border-rose-200 dark:border-rose-900/30":"bg-slate-50/50 dark:bg-white/[0.02] border-slate-100 dark:border-white/5 opacity-60"}`,children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"overflow-hidden",children:[l.jsx("h4",{className:"font-bold text-sm text-black dark:text-white truncate",children:g.name}),l.jsxs("p",{className:"text-[10px] text-slate-400 font-mono mt-0.5",children:["v",g.version]})]}),g.status==="loading"&&l.jsx($t,{className:"w-4 h-4 text-blue-500 animate-spin"}),g.status==="success"&&l.jsx("div",{className:`w-2.5 h-2.5 rounded-full ring-4 ${g.result?.riskLevel===C.SAFE?"bg-emerald-500 ring-emerald-500/10":g.result?.riskLevel===C.CAUTION?"bg-amber-500 ring-amber-500/10":"bg-rose-500 ring-rose-500/10"}`})]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:`px-2 py-0.5 rounded text-[9px] font-black uppercase tracking-wider ${g.result?.riskLevel===C.HIGH?"bg-rose-100 dark:bg-rose-900/30 text-rose-600":"bg-slate-100 dark:bg-white/5 text-slate-600 dark:text-slate-400"}`,children:g.result?.license||(g.status==="loading"?"...":"?")}),g.result?.repository&&l.jsxs("a",{href:g.result.repository,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1.5 text-[9px] font-bold text-blue-500 hover:text-blue-600 transition-colors uppercase",children:[st(g.result.repository)?l.jsx(Ut,{className:"w-3 h-3"}):l.jsx(bn,{className:"w-3 h-3"}),"Source"]})]}),g.result?.reason&&l.jsx("p",{className:"text-[10px] text-slate-400 dark:text-slate-500 line-clamp-2 leading-relaxed italic",children:g.result.reason})]})]},`${g.name}-${D}`))})]})})};function Ba(){return l.jsx(La,{})}export{Ba as component};
